let i=[],l=0;const c=4;let f=e=>{let o=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},lc:0,listen(n){return t.lc=o.push(n),()=>{for(let s=l+c;s<i.length;)i[s]===n?i.splice(s,c):s+=c;let a=o.indexOf(n);~a&&(o.splice(a,1),--t.lc||t.off())}},notify(n,a){let s=!i.length;for(let h of o)i.push(h,t.value,n,a);if(s){for(l=0;l<i.length;l+=c)i[l](i[l+1],i[l+2],i[l+3]);i.length=0}},off(){},set(n){let a=t.value;a!==n&&(t.value=n,t.notify(a))},subscribe(n){let a=t.listen(n);return n(t.value),a},value:e};return t};var m=(e=>(e.BOOT_SEQUENCE="boot-sequence",e.MAIN_CONTENT="main-content",e))(m||{});const u=()=>{let e="boot-sequence";if(typeof window<"u"){const o="/",t=o.endsWith("/")?o:o+"/",a=(window.location.pathname.endsWith("/")?window.location.pathname:window.location.pathname+"/")===t,s=new URLSearchParams(window.location.search).get("intro")==="false";a?s?e="main-content":e="boot-sequence":e="main-content"}return{uiState:e}},r=f(u()),d={initializeFromURL(){const e=u();r.set(e)},completeBootSequence(){r.set({uiState:"main-content"})},skipToMainContent(){const e=new URLSearchParams(window.location.search);e.set("intro","false"),window.history.pushState({},"",`${window.location.pathname}?${e.toString()}`),r.set({uiState:"main-content"})},handleNavigation(){this.initializeFromURL()}};export{r as $,m as U,d as a};
